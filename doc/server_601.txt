/*
 * 关于601的arm服务器的一些东西
 *
 * $CreatedBy: zhs $
 * $LastChangedRevision: 6 $
 * $LastChangedDate: 2010-12-13 20:48:31 +0800 (一, 2010-12-13) $
 * $LastChangedBy: zhs $
 * $URL: svn://armserver/home/arm/work/svn/doc_repos/server_601.txt $
 */

/*** 服务器系统管理 ***/
是的，这个服务器装的是arch-linux，因此首先这边介绍一下arch-linux里面系统管理与
其他发行版不同的地方。当然大部分的知识都应该是一样的，可能只是某个系统配置所在
的配置文件不同而已。

首先的系统文件是/etc/rc.conf。这个文件包含了区域、时区、主机名、网络接口等内容
还是比较重要的。配置文件里对每部分都有详细的注释，到时参考就可以了。这里说明几
个比较相关的设置。
	- 主机名
		主机名对应的变量名是HOSTNAME，这里设置为：armserver。
	- 网络接口
		对应的变量为INTERFACES，用来指定使用的是哪一个网卡设备，这台PC
		只有一个网卡设备eth0，可以在eth0变量里根据字符串格式设置相应的
		参数：设备名、IP、掩码、广播地址。
		/* 2010年11月23日 星期二 16时13分20秒 */
		//-
		此外，变量gateway表示网关，这里设置为192.168.0.4，对应的是实验
		室的出口服务器的ip，如果服务器的ip换了，这个地址也应该相应进行
		修改。
		//+
		因为学校网络该为动态获取，因此给服务器增加了一个网卡。eth0为内
		部网络接口，给的ip是192.168.0.188，而eth1为外部网络接口， 为面
		向实验室网络的，配置为DHCP。同时设置了iptables，使得内部网段能
		够访问校园网络。
		/* end */
	- Daemon程序
		对应的变量名是DAEMONS，在括号里添加已经安装好的服务名即可。
		注意:这个是作为standalone运行的程序，不是作为xinet或inet的运行
		方式。


/* 用户管理 */	
服务器的系统管理的帐号的用户名是：arm,密码是：arm601。请使用该账户进行系统管理
(比如设置IP，安装、修改系统软件比如subversion等操作)以及公用资源的管理（比如交
叉编译器，文档等资源），并且希望在每次登录后进行的操作进入在对应的系统管理员账
号的~home下的changelog.txt里，以便日后检查。

系统的用户管理方面：
	- 添加用户命令：
		$ useradd -m somebody 
		这样，就创建了一个新的账户，用户名为somebody，并自动建立了对应
		的home了.更详细的参数说明自己man。
	- 设置相应的密码：
		$ passwd somebody
		然后根据提示输入对应的密码就可以了。
	- 修改用户信息：
		$ usermod somebody [options]
		具体参数看man。
	- 删除账户：
		$ userdel -r somebody
		即连home一并删除了。

	- 如果需要将某个账户加入到能够使用sudo的队伍的好，使用命令：
		$ visudo /etc/sudoers
		按照格式添加即可。(或者直接强制使用sudo vim).

关于系统管理更多的信息可以自己查找，这里不赘述。

/* bras */
安装的校内bras拨号，脚本位置在/usr/local/sbin/brasb， 而且已经将该命令软链接到
了/usr/bin下面，所以不需要添加路径到PATH中去了。 这里将原来从bbs上下载的脚本分
成了两个，一个是brasa，一个是brasb。分别用于@a和@b的登录。更换bras帐号需要修改
对应的配置文件里的用户名。当然还保留这原始的bras脚本,这样就可以有交互登录了。

另外，如果在服务器上想要浏览网页，使用如下命令：
	$ w3m www.baidu.com
即可，至于w3m的使用以及快捷键的使用可以在该程序内help.(w3m的默认快捷键已被我修
改了)

/* pacman */
软件安装方面，应为arch-linux是滚动升级的，因此只需要更新系统就可以保证你现在的
系统就是arch-linux的最新版本系统了。使用如下命令：
	$ pacman -Syu
建议管理者定时都能更新一下子。因为这里设置的源是当初在@b的情况下设置的，所以建
议安装和更新使用@b进行。(管理者的@b流量啊~~)

如果是安装软件，则执行命令：
	$ pacman -S firefox
删除软件命令为：
	$ pacman -R firefox
搜索包命令为：
	$ pacman -Ss fire
查看有关包的信息；
	$ pacman -Qi firefox
列出该包的文件：
	$ pacman -Ql firefox

事实上，pacman的管理系统还是比较复杂的，搜索包，更新， 甚至一个前端GUI。可以参
相关文档了解更多。

/* proftpd */
配置文件位于/etc/vsftpd.conf
	
/* 定时关机 */
使用了sudo crontab -e -u root，指定了在每天的22:30提示在5分钟后关机，即是说，每天
的22:35，服务器会自动关机。

/*** 用户操作 ***/
服务器上已经运行了sshd服务，因此允许用户远程ssh登录进行管理(没有运行X window，
所以不能远程桌面咯^_^)。如果用户想要登录服务器，首先保证你的PC是连接在实验室的
局域网的，然后你得拥有一个用户名和密码。 如果是Linux系统，则保证安装ssh(很多系
统应该都预装了)，然后使用命令：
	$ ssh somebody@192.168.0.188
格式为：用户名@服务器IP。接下来，如果是第一次登录服务器，会提示你接收密钥,选择
'yes'即可。然后输入密码即可登录。

/* 2010年11月23日 星期二 16时17分10秒 */
//+
因为修改了网络环境后，内部网段的使用：
    $ ssh somebody@192.168.0.188
登录，而实验室网段的则需要知道动态分配的ip。不过现在基本上稳定的给出是：
    172.20.69.133
服务器的管理帐号是：arm:arm601。不过希望登录后不要进行胡乱操作或者各种实验，以
免不小心更改配置或破坏数据。
/* end */

而如果操作系统为Windows，使用软件putty(当然还有其他软件，这个比较便捷和强大)，
在putty的配置界面里设置好服务器IP，就可以登录了。当然还有其他更细致的设置，这
里就不赘述了。

用户的目录以及文件名尽量用英文命名，因为对于不同的登录终端，可能对中文的支持不
是很好，会出现乱码。当然，如果出现乱码了，要编辑中文内容的话会比较惨，只能下到
本地，修改，再上传了。不过对于Linux终端来说，一般这个问题不会出现。

/* ftp */
服务器上搭设了一个ftp服务，使用的ftp服务软件为proftpd(应该没记错吧)。 里面存放
了许多嵌入式学习的资料以及实验室中嵌入式文档和各类源代码。
使用普通的ftp客户端软件即可进行访问了，访问的地址如下：
    ftp://xxx:xxx@armftp
其中armftp为该ftp地址，内网的地址为192.168.0.188，实验室网段的地址为动态分配，
目前稳定的为172.20.69.133，如果发生变化请询问管理员。

提供的访问账户如下：
- up:up: 上传账户
- down:down: 下载账户
- admin:admin: 管理账户

/* subversion */
服务器上搭设了subversion服务，对实验室中的项目源码以及文档进行了版本控制。主要
的仓库目录根路径为：
    svn://armserver/home/arm/work/svn/

在这里的svn仓库采用的是一个项目一个仓库的组织方式。 因此该目录下的每个目录都代
表了一个项目仓库。目前已有的仓库有：
- demo_repos：用于进行svn入门学习用，随便操作吧。
- doc_repos：实验室的相关文档的仓库。
  目前拥有的文档包括：
  - pg_style.txt，代码风格文档。
  - svn_help.txt，subversion小册子。
  - server_601.txt，关于服务器的一些说明。
  - unit_test_guide.txt，单元测试的一些入门知识。 
  - vim_guide.txt，使用vim进行C语言编程的一个教程。 
- mm_repos：笔者自己的一个小软件的仓库^_^。
- monitor_repos：多参数监护仪的仓库。
- sp_print_repos：用于多参数监护仪中的热敏打印机驱动的仓库。
- ventilator_repos：呼吸机的仓库。

关于subversion的操作可以参考svn_book.pdf和实验室的文档svn_help.txt。文档均位于
ftp://armftp/work/svn目录下。
